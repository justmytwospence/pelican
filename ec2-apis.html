<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Scheduling tasks in the cloud with EC2 APIs - justmytwospence</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Open Graph tags -->
        <meta property="og:site_name" content="justmytwospence" />
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Scheduling tasks in the cloud with EC2 APIs"/>
            <meta property="og:url" content="http://justmytwospence.github.com/pelican/ec2-apis.html"/>
            <meta property="og:description" content="[dropcap]T[/dropcap]his post is sort of an addendum to our live-mapping project, but it should also be of use to anyone looking to run an arbitrary script on a recurring schedule. Originally, we set up a 24/7 instance on Amazon’s Elastic Compute Cloud that ran a ..."/>
            <meta property="article:published_time" content="2014-01-12" />
            <meta property="article:section" content="misc" />
            <meta property="article:tag" content="api" />
            <meta property="article:tag" content="auto scaling" />
            <meta property="article:tag" content="aws" />
            <meta property="article:tag" content="cloud" />
            <meta property="article:tag" content="cron" />
            <meta property="article:tag" content="ec2" />

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://justmytwospence.github.com/pelican/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://justmytwospence.github.com/pelican/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://justmytwospence.github.com/pelican/theme/css/pygments/native.css" rel="stylesheet">
        <link href="http://justmytwospence.github.com/pelican/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://justmytwospence.github.com/pelican/theme/css/style.css" type="text/css"/>
        <link href="http://justmytwospence.github.com/pelican/static/custom.css" rel="stylesheet">

        <link href="http://justmytwospence.github.com/pelican/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="justmytwospence ATOM Feed"/>

    <style type="text/css">
.border-box-sizing{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}
.corner-all{border-radius:4px;}
.hbox{display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:horizontal;-moz-box-align:stretch;display:box;box-orient:horizontal;box-align:stretch;}
.hbox>*{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;}
.vbox{display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
.vbox>*{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;}
.reverse{-webkit-box-direction:reverse;-moz-box-direction:reverse;box-direction:reverse;}
.box-flex0{-webkit-box-flex:0;-moz-box-flex:0;box-flex:0;}
.box-flex1{-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;}
.box-flex{-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;}
.box-flex2{-webkit-box-flex:2;-moz-box-flex:2;box-flex:2;}
.box-group1{-webkit-box-flex-group:1;-moz-box-flex-group:1;box-flex-group:1;}
.box-group2{-webkit-box-flex-group:2;-moz-box-flex-group:2;box-flex-group:2;}
.start{-webkit-box-pack:start;-moz-box-pack:start;box-pack:start;}
.end{-webkit-box-pack:end;-moz-box-pack:end;box-pack:end;}
.center{-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;}
body{background-color:white;position:absolute;left:0px;right:0px;top:0px;bottom:0px;overflow:visible;}
div#header{display:none;}
#ipython_notebook{padding-left:16px;}
#noscript{width:auto;padding-top:16px;padding-bottom:16px;text-align:center;font-size:22px;color:red;font-weight:bold;}
#ipython_notebook img{font-family:Verdana,"Helvetica Neue",Arial,Helvetica,Geneva,sans-serif;height:24px;text-decoration:none;color:black;}
#site{width:100%;display:none;}
.ui-button .ui-button-text{padding:0.2em 0.8em;font-size:77%;}
input.ui-button{padding:0.3em 0.9em;}
span#login_widget{float:right;}
#header>span{margin-top:10px;}
.modal-body{max-height:500px;}
.alternate_upload{background-color:none;display:inline;}
.alternate_upload.form{padding:0;margin:0;}
.alternate_upload input.fileinput{background-color:red;position:relative;opacity:0;z-index:2;width:295px;margin-left:163px;cursor:pointer;}
.list_toolbar{padding:5px;height:25px;line-height:25px;}
.toolbar_info{float:left;}
.toolbar_buttons{float:right;}
.list_header{font-weight:bold;}
.list_container{margin-top:16px;margin-bottom:16px;border:1px solid #ababab;border-radius:4px;}
.list_container>div{border-bottom:1px solid #ababab;}.list_container>div:hover .list-item{background-color:red;}
.list_container>div:last-child{border:none;}
.list_item:hover .list_item{background-color:#ddd;}
.list_container>div>span,.list_container>div>div{padding:8px;}
.list_item a{text-decoration:none;}
input.nbname_input{height:15px;}
.highlight_text{color:blue;}
#project_name>.breadcrumb{padding:0px;margin-bottom:0px;background-color:transparent;font-weight:bold;}
input.engine_num_input{height:20px;margin-bottom:2px;padding-top:0;padding-bottom:0;width:60px;}
.ansibold{font-weight:bold;}
.ansiblack{color:black;}
.ansired{color:darkred;}
.ansigreen{color:darkgreen;}
.ansiyellow{color:brown;}
.ansiblue{color:darkblue;}
.ansipurple{color:darkviolet;}
.ansicyan{color:steelblue;}
.ansigray{color:gray;}
.ansibgblack{background-color:black;}
.ansibgred{background-color:red;}
.ansibggreen{background-color:green;}
.ansibgyellow{background-color:yellow;}
.ansibgblue{background-color:blue;}
.ansibgpurple{background-color:magenta;}
.ansibgcyan{background-color:cyan;}
.ansibggray{background-color:gray;}
div.cell{border:1px solid transparent;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;padding:5px 5px 5px 0px;margin:2px 0px 2px 7px;outline:none;}div.cell.selected{border-radius:4px;border:thin #ababab solid;}
div.prompt{width:11ex;padding:0.4em;margin:0px;font-family:monospace;text-align:right;line-height:1.231em;}
.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-top-right-radius:3px;border-top-left-radius:3px;width:100%;-webkit-box-pack:end;height:22px;}
.no_input_radius{border-top-right-radius:0px;border-top-left-radius:0px;}
.text_cell .ctb_prompt{display:none;}
.code_cell .ctb_prompt{display:block;}
.ctb_hideshow{display:none;vertical-align:bottom;padding-right:2px;}
.celltoolbar>div{padding-top:0px;}
.ctb_area{margin:0;padding:0;width:100%;}
.ctb_show.ctb_hideshow,.ctb_show .ctb_hideshow{display:block;}
.ctb_show .input_area,.ctb_show .ctb_hideshow+div.text_cell_input{border-top-right-radius:0px;border-top-left-radius:0px;}
.ctb_show>.celltoolbar{border-bottom-right-radius:0px;border-bottom-left-radius:0px;}
.button_container{margin-top:0;margin-bottom:0;}
.ui-button{min-width:30px;}
.celltoolbar .button_container select{margin:10px;margin-top:1px;margin-bottom:0px;padding:0;font-size:87%;width:auto;display:inline-block;height:18px;line-height:18px;vertical-align:top;}
.celltoolbar label{display:inline-block;height:15px;line-height:15px;vertical-align:top;}
.celltoolbar label span{font-size:85%;}
.celltoolbar input[type=checkbox]{margin:0px;margin-left:4px;margin-right:4px;}
.celltoolbar .ui-button{border:none;vertical-align:top;height:20px;}
div.input{page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:horizontal;-moz-box-align:stretch;display:box;box-orient:horizontal;box-align:stretch;}
div.input_area{border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;}
div.input_prompt{color:navy;border-top:1px solid transparent;}
div.output_wrapper{margin-top:5px;position:relative;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.output_scroll{height:24em;width:100%;overflow:auto;border-radius:4px;-webkit-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);-moz-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);}
div.output_collapsed{margin:0px;padding:0px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.out_prompt_overlay{height:100%;padding:0px 0.4em;position:absolute;border-radius:4px;}
div.out_prompt_overlay:hover{-webkit-box-shadow:inset 0 0 1px #000000;-moz-box-shadow:inset 0 0 1px #000000;box-shadow:inset 0 0 1px #000000;background:rgba(240, 240, 240, 0.5);}
div.output_prompt{color:darkred;}
.CodeMirror{line-height:1.231em;height:auto;background:none;}
.CodeMirror-scroll{overflow-y:hidden;overflow-x:auto;}
@-moz-document {.CodeMirror-scroll{overflow-x:hidden;}}.CodeMirror-lines{padding:0.4em;}
.CodeMirror-linenumber{padding:0 8px 0 4px;}
.CodeMirror-gutters{border-bottom-left-radius:4px;border-top-left-radius:4px;}
.CodeMirror pre{padding:0;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;}
.completions{position:absolute;z-index:10;overflow:hidden;border:1px solid #ababab;border-radius:4px;-webkit-box-shadow:0px 6px 10px -1px #adadad;-moz-box-shadow:0px 6px 10px -1px #adadad;box-shadow:0px 6px 10px -1px #adadad;}
.completions select{background:white;outline:none;border:none;padding:0px;margin:0px;overflow:auto;font-family:monospace;font-size:110%;color:#000000;}
.completions select option.context{color:#0064cd;}
pre code{display:block;padding:0.5em;}
.highlight-base,pre code,pre .subst,pre .tag .title,pre .lisp .title,pre .clojure .built_in,pre .nginx .title{color:black;}
.highlight-string,pre .string,pre .constant,pre .parent,pre .tag .value,pre .rules .value,pre .rules .value .number,pre .preprocessor,pre .ruby .symbol,pre .ruby .symbol .string,pre .aggregate,pre .template_tag,pre .django .variable,pre .smalltalk .class,pre .addition,pre .flow,pre .stream,pre .bash .variable,pre .apache .tag,pre .apache .cbracket,pre .tex .command,pre .tex .special,pre .erlang_repl .function_or_atom,pre .markdown .header{color:#BA2121;}
.highlight-comment,pre .comment,pre .annotation,pre .template_comment,pre .diff .header,pre .chunk,pre .markdown .blockquote{color:#408080;font-style:italic;}
.highlight-number,pre .number,pre .date,pre .regexp,pre .literal,pre .smalltalk .symbol,pre .smalltalk .char,pre .go .constant,pre .change,pre .markdown .bullet,pre .markdown .link_url{color:#080;}
pre .label,pre .javadoc,pre .ruby .string,pre .decorator,pre .filter .argument,pre .localvars,pre .array,pre .attr_selector,pre .important,pre .pseudo,pre .pi,pre .doctype,pre .deletion,pre .envvar,pre .shebang,pre .apache .sqbracket,pre .nginx .built_in,pre .tex .formula,pre .erlang_repl .reserved,pre .prompt,pre .markdown .link_label,pre .vhdl .attribute,pre .clojure .attribute,pre .coffeescript .property{color:#8888ff;}
.highlight-keyword,pre .keyword,pre .id,pre .phpdoc,pre .aggregate,pre .css .tag,pre .javadoctag,pre .phpdoc,pre .yardoctag,pre .smalltalk .class,pre .winutils,pre .bash .variable,pre .apache .tag,pre .go .typename,pre .tex .command,pre .markdown .strong,pre .request,pre .status{color:#008000;font-weight:bold;}
.highlight-builtin,pre .built_in{color:#008000;}
pre .markdown .emphasis{font-style:italic;}
pre .nginx .built_in{font-weight:normal;}
pre .coffeescript .javascript,pre .javascript .xml,pre .tex .formula,pre .xml .javascript,pre .xml .vbscript,pre .xml .css,pre .xml .cdata{opacity:0.5;}
.cm-s-ipython span.cm-variable{color:black;}
.cm-s-ipython span.cm-keyword{color:#008000;font-weight:bold;}
.cm-s-ipython span.cm-number{color:#080;}
.cm-s-ipython span.cm-comment{color:#408080;font-style:italic;}
.cm-s-ipython span.cm-string{color:#BA2121;}
.cm-s-ipython span.cm-builtin{color:#008000;}
.cm-s-ipython span.cm-error{color:#f00;}
.cm-s-ipython span.cm-operator{color:#AA22FF;font-weight:bold;}
.cm-s-ipython span.cm-meta{color:#AA22FF;}
#menubar li.dropdown{line-height:12px;}
body{background-color:#ffffff;}
body.notebook_app{overflow:hidden;}
span#notebook_name{height:1em;line-height:1em;padding:3px;border:none;font-size:146.5%;}
div#notebook_panel{margin:0px 0px 0px 0px;padding:0px;-webkit-box-shadow:0 -1px 10px rgba(0, 0, 0, 0.1);-moz-box-shadow:0 -1px 10px rgba(0, 0, 0, 0.1);box-shadow:0 -1px 10px rgba(0, 0, 0, 0.1);}
div#notebook{overflow-y:scroll;overflow-x:auto;width:100%;padding:5px 5px 15px 5px;margin:0px;border-top:1px solid #ababab;}
div.ui-widget-content{border:1px solid #ababab;outline:none;}
pre.dialog{background-color:#f7f7f7;border:1px solid #ddd;border-radius:4px;padding:0.4em;padding-left:2em;}
p.dialog{padding:0.2em;}
pre,code,kbd,samp{white-space:pre-wrap;}
#fonttest{font-family:monospace;}
p{margin-bottom:0;}
.end_space{height:200px;}
#notification_area{z-index:10;}
.notification_widget{color:#777777;padding:1px 12px;margin:2px 4px;z-index:10;border:1px solid #ccc;border-radius:4px;background:rgba(240, 240, 240, 0.5);}
div.output_area{padding:0px;page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:horizontal;-moz-box-align:stretch;display:box;box-orient:horizontal;box-align:stretch;}
div.output_area pre{font-family:monospace;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline;color:black;background-color:transparent;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;line-height:inherit;}
div.output_subarea{padding:0.44em 0.4em 0.4em 1px;margin-left:6px;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;}
div.output_text{text-align:left;color:#000000;font-family:monospace;line-height:1.231em;}
div.output_stream{padding-top:0.0em;padding-bottom:0.0em;}
div.output_stderr{background:#fdd;}
div.output_latex{text-align:left;}
.js-error{color:darkred;}
div.raw_input{padding-top:0px;padding-bottom:0px;height:1em;line-height:1em;font-family:monospace;}
span.input_prompt{font-family:inherit;}
input.raw_input{font-family:inherit;font-size:inherit;color:inherit;width:auto;margin:-2px 0px 0px 1px;padding-left:1px;padding-top:2px;height:1em;}
p.p-space{margin-bottom:10px;}
div#pager_splitter{height:8px;}
#pager-container{position:relative;padding:15px 0px;}
div#pager{overflow:auto;display:none;}div#pager pre{font-size:13px;line-height:1.231em;color:#000000;background-color:#f7f7f7;padding:0.4em;}
.shortcut_key{display:inline-block;width:15ex;text-align:right;font-family:monospace;}
.shortcut_descr{display:inline-block;}
div.quickhelp{float:left;width:50%;}
.rendered_html{color:black;}.rendered_html em{font-style:italic;}
.rendered_html strong{font-weight:bold;}
.rendered_html u{text-decoration:underline;}
.rendered_html :link{text-decoration:underline;}
.rendered_html :visited{text-decoration:underline;}
.rendered_html h1{font-size:197%;margin:.65em 0;font-weight:bold;}
.rendered_html h2{font-size:153.9%;margin:.75em 0;font-weight:bold;}
.rendered_html h3{font-size:123.1%;margin:.85em 0;font-weight:bold;}
.rendered_html h4{font-size:100%;margin:0.95em 0;font-weight:bold;}
.rendered_html h5{font-size:85%;margin:1.5em 0;font-weight:bold;}
.rendered_html h6{font-size:77%;margin:1.65em 0;font-weight:bold;}
.rendered_html ul{list-style:disc;margin:1em 2em;}
.rendered_html ul ul{list-style:square;margin:0em 2em;}
.rendered_html ul ul ul{list-style:circle;margin:0em 2em;}
.rendered_html ol{list-style:decimal;margin:1em 2em;}
.rendered_html ol ol{list-style:upper-alpha;margin:0em 2em;}
.rendered_html ol ol ol{list-style:lower-alpha;margin:0em 2em;}
.rendered_html ol ol ol ol{list-style:lower-roman;margin:0em 2em;}
.rendered_html ol ol ol ol ol{list-style:decimal;margin:0em 2em;}
.rendered_html hr{color:black;background-color:black;}
.rendered_html pre{margin:1em 2em;}
.rendered_html pre,.rendered_html code{border:0;background-color:#ffffff;color:#000000;font-size:100%;padding:0px;}
.rendered_html blockquote{margin:1em 2em;}
.rendered_html table,.rendered_html tr,.rendered_html th,.rendered_html td{border:1px solid black;border-collapse:collapse;margin:1em 2em;}
.rendered_html td,.rendered_html th{text-align:left;vertical-align:middle;padding:4px;}
.rendered_html th{font-weight:bold;}
.rendered_html p{text-align:justify;}
.rendered_html p+p{margin-top:1em;}
span#save_widget{padding:0px 5px;margin-top:12px;}
span#checkpoint_status,span#autosave_status{font-size:small;}
div.text_cell_input{color:#000000;border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;}
div.text_cell_render{outline:none;resize:none;width:inherit;border-style:none;padding:5px;color:#000000;}
a.anchor-link:link{text-decoration:none;padding:0px 20px;visibility:hidden;}
h1:hover .anchor-link,h2:hover .anchor-link,h3:hover .anchor-link,h4:hover .anchor-link,h5:hover .anchor-link,h6:hover .anchor-link{visibility:visible;}
.toolbar{padding:0px 10px;margin-top:-5px;}.toolbar select,.toolbar label{width:auto;height:26px;vertical-align:middle;margin-right:2px;margin-bottom:0px;display:inline;font-size:92%;margin-left:0.3em;margin-right:0.3em;padding:0px;padding-top:3px;}
.toolbar .btn{padding:2px 8px;}
.toolbar .btn-group{margin-top:0px;}
.toolbar-inner{border:none !important;-webkit-box-shadow:none !important;-moz-box-shadow:none !important;box-shadow:none !important;}
#maintoolbar{margin-bottom:0px;}
@-moz-keyframes fadeOut{from{opacity:1;} to{opacity:0;}}@-webkit-keyframes fadeOut{from{opacity:1;} to{opacity:0;}}@-moz-keyframes fadeIn{from{opacity:0;} to{opacity:1;}}@-webkit-keyframes fadeIn{from{opacity:0;} to{opacity:1;}}.bigtooltip{overflow:auto;height:200px;-webkit-transition-property:height;-webkit-transition-duration:500ms;-moz-transition-property:height;-moz-transition-duration:500ms;transition-property:height;transition-duration:500ms;}
.smalltooltip{-webkit-transition-property:height;-webkit-transition-duration:500ms;-moz-transition-property:height;-moz-transition-duration:500ms;transition-property:height;transition-duration:500ms;text-overflow:ellipsis;overflow:hidden;height:80px;}
.tooltipbuttons{position:absolute;padding-right:15px;top:0px;right:0px;}
.tooltiptext{padding-right:30px;}
.ipython_tooltip{max-width:700px;-webkit-animation:fadeOut 400ms;-moz-animation:fadeOut 400ms;animation:fadeOut 400ms;-webkit-animation:fadeIn 400ms;-moz-animation:fadeIn 400ms;animation:fadeIn 400ms;vertical-align:middle;background-color:#f7f7f7;overflow:visible;border:#ababab 1px solid;outline:none;padding:3px;margin:0px;padding-left:7px;font-family:monospace;min-height:50px;-moz-box-shadow:0px 6px 10px -1px #adadad;-webkit-box-shadow:0px 6px 10px -1px #adadad;box-shadow:0px 6px 10px -1px #adadad;border-radius:4px;position:absolute;z-index:2;}.ipython_tooltip a{float:right;}
.ipython_tooltip .tooltiptext pre{border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;font-size:100%;background-color:#f7f7f7;}
.pretooltiparrow{left:0px;margin:0px;top:-16px;width:40px;height:16px;overflow:hidden;position:absolute;}
.pretooltiparrow:before{background-color:#f7f7f7;border:1px #ababab solid;z-index:11;content:"";position:absolute;left:15px;top:10px;width:25px;height:25px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);}

</style>


<style type="text/css">
.highlight-ipynb .hll { background-color: #ffffcc }
.highlight-ipynb  { background: #f8f8f8; }
.highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */
.highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */
.highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */
.highlight-ipynb .o { color: #666666 } /* Operator */
.highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */
.highlight-ipynb .ge { font-style: italic } /* Generic.Emph */
.highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */
.highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */
.highlight-ipynb .go { color: #888888 } /* Generic.Output */
.highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */
.highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */
.highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */
.highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */
.highlight-ipynb .m { color: #666666 } /* Literal.Number */
.highlight-ipynb .s { color: #BA2121 } /* Literal.String */
.highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */
.highlight-ipynb .nb { color: #008000 } /* Name.Builtin */
.highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight-ipynb .no { color: #880000 } /* Name.Constant */
.highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */
.highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight-ipynb .nf { color: #0000FF } /* Name.Function */
.highlight-ipynb .nl { color: #A0A000 } /* Name.Label */
.highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight-ipynb .nv { color: #19177C } /* Name.Variable */
.highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */
.highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */
.highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */
.highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */
.highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */
.highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */
.highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */
.highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */
.highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */
.highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */
.highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */
.highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}
</style>

<script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'center', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>


</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://justmytwospence.github.com/pelican/" class="navbar-brand">
justmytwospence            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://justmytwospence.github.com/pelican/pages/about.html">
                             About
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://justmytwospence.github.com/pelican/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://justmytwospence.github.com/pelican/ec2-apis.html"
                       rel="bookmark"
                       title="Permalink to Scheduling tasks in the cloud with EC2 APIs">
                        Scheduling tasks in the cloud with <span class="caps">EC2</span>&nbsp;APIs
                    </a>
                </h1>
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-01-12T17:53:00"> Sun 12 January 2014</time>
    </span>

    <span class="label label-default">Category</span>
    <a href="http://justmytwospence.github.com/pelican/category/misc.html">misc</a>


<span class="label label-default">Tags</span>
	<a href="http://justmytwospence.github.com/pelican/tag/api.html">api</a>
        /
	<a href="http://justmytwospence.github.com/pelican/tag/auto-scaling.html">auto scaling</a>
        /
	<a href="http://justmytwospence.github.com/pelican/tag/aws.html">aws</a>
        /
	<a href="http://justmytwospence.github.com/pelican/tag/cloud.html">cloud</a>
        /
	<a href="http://justmytwospence.github.com/pelican/tag/cron.html">cron</a>
        /
	<a href="http://justmytwospence.github.com/pelican/tag/ec2.html">ec2</a>
    
</footer><!-- /.post-info -->            </header>
            <div class="entry-content">
                <p>[dropcap]T[/dropcap]his post is sort of an addendum to our <a href="http://www.spencerboucher.com/live-mapping/" title="Live mapping">live-mapping
project</a>, but it should also be of use to anyone looking to run an
arbitrary script on a recurring schedule. Originally, we set up a 24/7
instance on <a href="http://aws.amazon.com/ec2/">Amazon&#8217;s Elastic Compute Cloud</a> that ran a daily <code>cron</code>
job. This works, but its a bit wasteful because we&#8217;re paying for 24
hours of cloud even though we&#8217;re only actually using it for maybe 5
minutes a&nbsp;day.</p>
<p>Fortunately, Amazon provides a <a href="http://aws.amazon.com/developertools/">schmorgesborg</a> of command line
interface (<span class="caps">CLI</span>) tools that allow us to manage our cloud instances more
efficiently. Specifically, we want to schedule an instance to spin up
only once a day, execute our script, then shut back down. To accomplish
this, we will want three <span class="caps">CLI</span> tools: <a href="http://aws.amazon.com/developertools/368">the Amazon <span class="caps">EC2</span> <span class="caps">AMI</span> Tools</a>, <a href="http://aws.amazon.com/developertools/351">the
Amazon <span class="caps">EC2</span> <span class="caps">API</span> Tools</a>,and <a href="http://aws.amazon.com/developertools/2535">the Auto Scaling Command Line Tool</a>. If
you&#8217;re on a Mac, it&#8217;s way easier to get these with <a href="http://brew.sh/">Homebrew</a> than by
downloading from Amazon&#8217;s&nbsp;website:</p>
<div class="highlight"><pre><span class="p">{.</span><span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="o">:</span><span class="mi">20</span> <span class="p">.</span><span class="n">toolbar</span><span class="o">-</span><span class="n">overlay</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">nums</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">nums</span><span class="o">-</span><span class="n">toggle</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">lang</span><span class="o">:</span><span class="n">sh</span> <span class="p">.</span><span class="n">decode</span><span class="o">:</span><span class="nb">true</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Go go gadget EC2&quot;</span><span class="p">}</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">ec2</span><span class="o">-</span><span class="n">ami</span><span class="o">-</span><span class="n">tools</span> <span class="err">#</span> <span class="n">For</span> <span class="n">creating</span> <span class="n">an</span> <span class="n">AMI</span> <span class="n">from</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">machine</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">ec2</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">tools</span> <span class="err">#</span> <span class="n">For</span> <span class="n">registering</span> <span class="n">and</span> <span class="n">launching</span> <span class="n">instances</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">aws</span><span class="o">-</span><span class="n">as</span>        <span class="err">#</span> <span class="n">For</span> <span class="n">creating</span> <span class="k">auto</span> <span class="n">scaling</span> <span class="n">groups</span> <span class="o">/</span> <span class="n">defining</span> <span class="n">schedules</span>
</pre></div>


<p>As an extra Homebrew bonus, running <code>brew info ec2-ami-tools</code>,
<code>brew info ec2-api-tools</code>, and <code>brew info aws-as</code> will now tell us
exactly what we need to do to get our authentication and environment
variables all set up. First we are told to download the necessary .pem
files from <a href="http://aws-portal.amazon.com/gp/aws/developer/account/index.html?action=access-key">this Amazon page</a> and place them into a new hidden
directory of our home directory &#8220;\~/.ec2&#8221;. Then we tell our command line
where everything lives now by inserting the following lines into our&nbsp;\~/.bashrc:</p>
<div class="highlight"><pre>{.line-height:20 .toolbar-overlay:false .nums:false .nums-toggle:false .lang:sh .decode:true title=&quot;Setting environment variables&quot;}
export EC2_PRIVATE_KEY=&quot;$(/bin/ls &quot;<span class="nv">$HOME</span>&quot;/.ec2/pk-*.pem | /usr/bin/head -1)&quot;
export EC2_CERT=&quot;$(/bin/ls &quot;<span class="nv">$HOME</span>&quot;/.ec2/cert-*.pem | /usr/bin/head -1)&quot;
export EC2_HOME=&quot;/usr/local/Cellar/ec2-api-tools/1.6.12.0/libexec&quot;
export AWS_AUTO_SCALING_HOME=&quot;/usr/local/Cellar/auto-scaling/1.0.61.4/libexec&quot;
export EC2_AMITOOL_HOME=&quot;/usr/local/Cellar/ec2-ami-tools/1.4.0.9/libexec&quot;
export EC2_REGION=&quot;us-west-2&quot;
export EC2_ZONE=<span class="cp">${</span><span class="n">EC2_REGION</span><span class="cp">}</span>a
export EC2_URL=https://<span class="nv">$EC2_REGION.ec2.amazonaws.com</span>
export AWS_AUTO_SCALING_URL=https://autoscaling.<span class="nv">$EC2_REGION.amazonaws.com</span>
</pre></div>


<p>Its pretty simple, but if you have any trouble with this part, refer to
the official <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html">Amazon documentation for setting up the command line</a>.</p>
<p>[column size=&#8221;one-half&#8221;]<br />
Because these environment variables are recognized out of the box by
the <span class="caps">CLI</span> tools, we won&#8217;t need to point to our authentication keys or
specify a region every time we make an <span class="caps">API</span> call and our next commands
will be much more succinct. Note that every <span class="caps">EC2</span> instance is physically
located at one of several regions; we are using us-west-2 because it
happens to be where I spun up the existing instance that currently holds
our &#8220;update.py&#8221; script, but any of them would probably work just fine
for the simple job at hand.<br />&nbsp;[/column]</p>
<p>[column size=&#8221;one-half&#8221;&nbsp;last=&#8221;true&#8221;]</p>
<p>Code&nbsp;Region</p>
<hr />
<p>ap-northeast-1   Asia Pacific (Tokyo) Region
  ap-southeast-1   Asia Pacific (Singapore) Region
  ap-southeast-2   Asia Pacific (Sydney) Region
  eu-west-1        <span class="caps">EU</span> (Ireland) Region
  sa-east-1        South America (Sao Paulo) Region
  us-east-1        <span class="caps">US</span> East (Northern Virginia) Region
  us-west-1        <span class="caps">US</span> West (Northern California) Region
  us-west-2        <span class="caps">US</span> West (Oregon)&nbsp;Region</p>
<p>[/column]</p>
<p>[hr]</p>
<p>[dropcap]1[/dropcap]So, first things first. We can&#8217;t just spin up an
off-the-rack <span class="caps">EC2</span> instance every day, because we&#8217;ll run into the same
problem that I originally had with my web host: the Python modules that
we need won&#8217;t be installed. We <em>could</em> write a script that would install
<code>pip</code> plus all of the requisite Python modules and run it first thing
after we launch the instance, but there&#8217;s a better&nbsp;way:</p>
<div class="highlight"><pre><span class="p">{.</span><span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="o">:</span><span class="mi">30</span> <span class="p">.</span><span class="n">toolbar</span><span class="o">-</span><span class="n">overlay</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">nums</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">nums</span><span class="o">-</span><span class="n">toggle</span><span class="o">:</span><span class="nb">false</span> <span class="p">.</span><span class="n">lang</span><span class="o">:</span><span class="n">sh</span> <span class="p">.</span><span class="n">decode</span><span class="o">:</span><span class="nb">true</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Creating our very own AMI&quot;</span><span class="p">}</span>
<span class="n">ec2</span><span class="o">-</span><span class="n">create</span><span class="o">-</span><span class="n">image</span> <span class="n">i</span><span class="o">-</span><span class="mf">8918e1</span><span class="n">be</span> <span class="o">-</span><span class="n">n</span> <span class="s">&quot;Map Update Image&quot;</span>
</pre></div>


<p>This command from <code>ec2-ami-tools</code> creates an &#8220;Amazon Machine Image&#8221; of
the instance that we previously had running and names it &#8220;Map Update
Image&#8221;. A new image <span class="caps">ID</span> will now print to your console, <code>ami-fcdfb9cc</code> in
my case. This is tantamount to cloning the instance, because we can now
reference the new image <span class="caps">ID</span> when we spin up new instances and all of our
modules, scripts, etc. will be there waiting for us. Note that I removed
the instance&#8217;s <code>cron</code> job <em>before</em> creating the <span class="caps">AMI</span>, because we&#8217;ll now
be handling the task scheduling from <emph>outside</emph> the instance,
via <strong>autoscaling</strong>.</p>
<p>[hr]</p>
<p>[dropcap]2[/dropcap]Next let&#8217;s write a shell script that will execute
our Python map-updating script, shoot us a diagnostic email, then shut
down the instance that its running on. The idea here is that once a day
we&#8217;re going to spin up an instance using our shiny new <span class="caps">AMI</span> and
immediately run this new script (let&#8217;s call it &#8220;update.sh&#8221;) that will do
its business and then promptly commit seppuku and stop charging us
money. Eric Hammond has created a great template on <a href="http://alestic.com/2011/11/ec2-schedule-instance">his blog</a>, which
I&#8217;ve modified below. Note the execution of our <a href="http://www.spencerboucher.com/live-mapping/" title="Live mapping">familiar</a> &#8220;update.py&#8221; script highlighted on line 4, and the apoptosis
command on line&nbsp;46:</p>
<p>~~~~ {.lang:sh .mark:4,44-46 .decode:true&nbsp;title=&#8221;update.sh&#8221;}</p>
<h1>!/bin/bash&nbsp;-x</h1>
<p>exec &gt; &gt;(tee /var/log/user-data.log|logger -t user-data -s 2&gt;/dev/console)&nbsp;2&gt;&amp;1</p>
<p>/usr/bin/python /home/ubuntu/update.py # Run the&nbsp;script</p>
<p><span class="caps">EMAIL</span>=spencer.g.boucher@gmail.com</p>
<h1>Upgrade and install Postfix so we can send a sample&nbsp;email</h1>
<p>export DEBIAN_FRONTEND=noninteractive
apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install -y&nbsp;postfix</p>
<h1>Get some information about the running&nbsp;instance</h1>
<p>instance_id=$(wget -qO- instance-data/latest/meta-data/instance-id)
public_ip=$(wget -qO- instance-data/latest/meta-data/public-ipv4)
zone=$(wget -qO- instance-data/latest/meta-data/placement/availability-zone)
region=$(expr match $zone &#8216;(.*).&#8217;)&nbsp;uptime=$(uptime)</p>
<h1>Send status&nbsp;email</h1>
<p>/usr/sbin/sendmail -oi -t -f $<span class="caps">EMAIL</span> &lt;&lt;<span class="caps">EOM</span>
From: $<span class="caps">EMAIL</span>
To: $<span class="caps">EMAIL</span>
Subject: Results of <span class="caps">EC2</span> scheduled&nbsp;script</p>
<p>This email message was generated on the following <span class="caps">EC2</span>&nbsp;instance:</p>
<p>instance id: $instance_id
  region:      $region
  public ip:   $public_ip
  uptime:&nbsp;$uptime</p>
<p>If the instance is still running, you can monitor the output of this
job using a command&nbsp;like:</p>
<p>ssh ubuntu@$public_ip tail -1000f&nbsp;/var/log/user-data.log</p>
<p>ec2-describe-instances &#8212;region $region&nbsp;$instance_id</p>
<p><span class="caps">EOM</span></p>
<h1>Give the script and email some time to do their&nbsp;thing</h1>
<p>sleep 600 # 10&nbsp;minutes</p>
<h1>This will stop the <span class="caps">EBS</span> boot instance, stopping the hourly&nbsp;charges.</h1>
<h1>Have Auto Scaling terminate it, stopping the storage&nbsp;charges.</h1>
<p>shutdown -h&nbsp;now</p>
<p>exit&nbsp;0</p>
<div class="highlight"><pre><span class="nx">Note</span> <span class="nx">that</span> <span class="nx">the</span> <span class="nb">user</span> <span class="kd">data</span> <span class="nb">script</span> <span class="nx">that</span> <span class="nx">we</span> <span class="nb">pass</span> <span class="k">to</span> <span class="nx">the</span> <span class="nx">launch</span> <span class="nx">configuration</span>
<span class="nx">executes</span> <span class="k">with</span> <span class="o">&lt;</span><span class="nx">emph</span><span class="o">&gt;</span><span class="nb">root</span><span class="o">&lt;/</span><span class="nx">emph</span><span class="o">&gt;</span> <span class="nx">permissions</span><span class="p">,</span> <span class="ow">not</span> <span class="nx">as</span> <span class="nx">the</span> <span class="nb">user</span> <span class="s2">&quot;ubuntu&quot;</span>
<span class="nx">that</span> <span class="nx">you</span> <span class="nx">would</span> <span class="nx">typically</span> <span class="n">log</span> <span class="k">in</span> <span class="nx">as</span> <span class="nx">via</span> <span class="sb">`ssh`</span><span class="nx">.</span> <span class="nx">Its</span> <span class="nx">probably</span> <span class="nx">best</span> <span class="k">to</span> <span class="nx">be</span> <span class="nx">as</span>
<span class="nx">explicit</span> <span class="nx">as</span> <span class="nx">possible</span> <span class="nx">when</span> <span class="nx">specifying</span> <span class="nb">path</span> <span class="n">names</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">cloud</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">tilde</span>
<span class="nx">operator</span> <span class="nx">might</span> <span class="nx">turn</span> <span class="nx">around</span> <span class="ow">and</span> <span class="nx">bite</span> <span class="nx">you.</span>

<span class="err">[</span><span class="nx">hr</span><span class="cp">]</span>

<span class="cp">[</span><span class="nx">dropcap</span><span class="cp">]</span>3<span class="cp">[</span><span class="p">/</span><span class="nx">dropcap</span><span class="cp">]</span>Now we need to create **launch configuration** that
will basically do all the button-pushing that we would normally be doing
at the AWS console GUI. Here we specify:

-   &quot;Micro&quot; as our instance type.
-   Our shell script &quot;update.sh&quot; from step 2 as the &quot;user-data-file&quot;.
    User data files are passed into the instance and executed
    immediately when supplied in the launch configuration. They must be
    less than 16kb as I suppose they are stored on some ancillary server
    somewhere.
-   The AMI image that we cloned in step 1 from the instance that
    included our Python modules.
-   The name of the launch config; let&#39;s call it
    &quot;map-update-launch-config&quot;.
</pre></div>


<p>{.line-height:20 .toolbar-overlay:false .nums:false .nums-toggle:false .lang:sh .decode:true title=&#8221;Create launch configuration&#8221;}
as-create-launch-config <br />
   &#8212;instance-type t1.micro <br />
   &#8212;user-data-file ~/Desktop/update.sh <br />
   &#8212;image-id ami-fcdfb9cc <br />
   &#8212;launch-config &#8220;map-update-launch-config&#8221;
as-describe-launch-configs&nbsp;&#8212;headers</p>
<div class="highlight"><pre><span class="n">Note</span> <span class="n">that</span> <span class="n">the</span> <span class="n">second</span> <span class="n">line</span> <span class="n">provides</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">all</span> <span class="n">the</span> <span class="n">launch</span>
<span class="n">configurations</span> <span class="n">that</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="p">.</span>

<span class="p">[</span><span class="n">hr</span><span class="p">]</span>

<span class="p">[</span><span class="n">dropcap</span><span class="p">]</span><span class="mi">4</span><span class="p">[</span><span class="o">/</span><span class="n">dropcap</span><span class="p">]</span><span class="n">We</span> <span class="n">must</span> <span class="n">also</span> <span class="n">create</span> <span class="n">an</span> <span class="o">**</span><span class="k">auto</span> <span class="n">scaling</span> <span class="n">group</span><span class="o">**</span><span class="p">.</span> <span class="n">These</span>
<span class="n">are</span> <span class="n">typically</span> <span class="n">used</span> <span class="n">as</span> <span class="n">a</span> <span class="n">sort</span> <span class="n">of</span> <span class="n">container</span> <span class="n">to</span> <span class="n">which</span> <span class="n">we</span> <span class="n">can</span> <span class="n">add</span><span class="o">/</span><span class="n">remove</span>
<span class="n">instances</span> <span class="n">on</span> <span class="n">a</span> <span class="n">schedule</span> <span class="n">or</span> <span class="n">in</span> <span class="n">response</span> <span class="n">to</span> <span class="n">heavy</span> <span class="n">traffic</span><span class="p">,</span> <span class="n">but</span> <span class="n">we</span> <span class="n">can</span> <span class="n">also</span>
<span class="n">use</span> <span class="n">it</span> <span class="n">to</span> <span class="n">schedule</span> <span class="n">a</span> <span class="n">single</span> <span class="n">instance</span> <span class="n">to</span> <span class="n">flick</span> <span class="n">on</span> <span class="n">and</span> <span class="n">off</span><span class="p">.</span> <span class="n">We</span> <span class="n">need</span> <span class="n">to</span>
<span class="n">tell</span> <span class="n">it</span><span class="o">:</span>

<span class="o">-</span>   <span class="n">A</span> <span class="n">name</span> <span class="n">to</span> <span class="n">assign</span> <span class="n">the</span> <span class="n">scaling</span> <span class="n">group</span> <span class="p">(</span><span class="s">&quot;map-update-scale-group&quot;</span><span class="p">).</span>
<span class="o">-</span>   <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">launch</span> <span class="n">configuration</span> <span class="n">we</span> <span class="n">created</span> <span class="n">in</span> <span class="n">step</span> <span class="mi">3</span>
    <span class="p">(</span><span class="s">&quot;map-update-launch-config&quot;</span><span class="p">).</span>
<span class="o">-</span>   <span class="n">Which</span> <span class="n">availability</span> <span class="n">zone</span> <span class="n">we</span> <span class="n">want</span> <span class="n">to</span> <span class="n">use</span> <span class="p">(</span><span class="n">basically</span> <span class="n">irrelevant</span><span class="p">;</span> <span class="n">we</span> <span class="n">set</span>
    <span class="n">our</span> <span class="n">environment</span> <span class="n">variable</span> <span class="err">`</span><span class="n">EC2_ZONE</span><span class="err">`</span> <span class="n">to</span> <span class="s">&quot;a&quot;</span> <span class="n">earlier</span><span class="p">).</span>
    <span class="err">`</span><span class="n">ec2</span><span class="o">-</span><span class="n">describe</span><span class="o">-</span><span class="n">available</span><span class="o">-</span><span class="n">zones</span><span class="err">`</span> <span class="n">provides</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">the</span> <span class="n">available</span>
    <span class="n">zones</span>
<span class="o">-</span>   <span class="n">A</span> <span class="n">minimum</span> <span class="n">and</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">instances</span> <span class="n">in</span> <span class="n">the</span> <span class="n">group</span><span class="p">.</span> <span class="n">We</span><span class="err">&#39;</span><span class="n">ll</span>
    <span class="n">initialize</span> <span class="n">these</span> <span class="n">to</span> <span class="n">zero</span><span class="p">.</span>
</pre></div>


<p>{.line-height:20 .toolbar-overlay:false .nums:false .nums-toggle:false .lang:sh .decode:true title=&#8221;Create auto scaling group with launch configuration&#8221;}
as-create-auto-scaling-group <br />
   &#8212;auto-scaling-group &#8220;map-update-scale-group&#8221; <br />
   &#8212;launch-configuration &#8220;map-update-launch-config&#8221; <br />
   &#8212;availability-zones &#8220;$EC2_ZONE&#8221; <br />
   &#8212;min-size 0 &#8212;max-size 0
as-suspend-processes &#8220;map-update-scale-group&#8221; <br />
   &#8212;processes ReplaceUnhealthy
as-describe-auto-scaling-groups&nbsp;&#8212;headers</p>
<div class="highlight"><pre><span class="k">In</span> <span class="nx">the</span> <span class="nb">second</span> <span class="nb">line</span><span class="p">,</span> <span class="nx">we</span> <span class="nx">are</span> <span class="nx">using</span> <span class="sb">`as-suspend-processes`</span> <span class="k">to</span> <span class="nx">prevent</span> <span class="nx">the</span>
<span class="nx">instance</span><span class="s1">&#39;s default behavior which is to attempt to restart after it is</span>
<span class="s1">shut down. The third line provides a list of all the auto scaling groups</span>
<span class="s1">that have been created.</span>

<span class="s1">[hr]</span>

<span class="s1">[dropcap]5[/dropcap]Last but not least, we are ready to assign a</span>
<span class="s1">schedule to our auto scaling group. Here we create two: one to start the</span>
<span class="s1">instance and one to terminate the instance. Astute readers will recall</span>
<span class="s1">that &quot;update.sh&quot; already &lt;emph&gt;stops&lt;/emph&gt; the instance so that we</span>
<span class="s1">aren&#39;</span><span class="nb">t</span> <span class="nx">paying</span> <span class="k">to</span> <span class="nx">have</span> <span class="nx">it</span> <span class="nb">running</span><span class="p">,</span> <span class="nx">but</span> <span class="nx">we</span> <span class="nx">also</span> <span class="nx">need</span> <span class="k">to</span> <span class="nx">completely</span>
<span class="o">&lt;</span><span class="nx">emph</span><span class="o">&gt;</span><span class="nx">terminate</span><span class="o">&lt;/</span><span class="nx">emph</span><span class="o">&gt;</span> <span class="nx">the</span> <span class="nx">instance</span> <span class="nx">so</span> <span class="nx">that</span> <span class="nx">we</span> <span class="nx">aren</span><span class="s1">&#39;t paying to store</span>
<span class="s1">information about it. Each schedule requires:</span>

<span class="s1">-   A name (&quot;map-update-start&quot; &amp; &quot;map-update-stop&quot;).</span>
<span class="s1">-   The name of the auto scaling group we created in step 4</span>
<span class="s1">    (&quot;map-update-scale-group&quot;).</span>
<span class="s1">-   How we want to scale. By setting both `min-size` and `max-size` to</span>
<span class="s1">    1, we are effectively turning on one instance. We later effectively</span>
<span class="s1">    turn that instance back off by setting both to 0.</span>
<span class="s1">-   A &quot;recurrence,&quot; ie when to occur. This flag uses the same syntax</span>
<span class="s1">    that `cron` does. Here we set the instance to launch at midnight UTC</span>
<span class="s1">    (`0 0 * * *`), and terminate 15 minutes later (`15 0 * * *`). Recall</span>
<span class="s1">    that our script already stops the instance 10 minutes after</span>
<span class="s1">    execution, so 15 minutes is playing it safe.</span>
</pre></div>


<p>{.line-height:20 .toolbar-overlay:false .nums:false .nums-toggle:false .lang:sh .decode:true title=&#8221;Create schedule for auto scaling group&#8221;}
as-put-scheduled-update-group-action <br />
   &#8212;name &#8220;map-update-start&#8221; <br />
   &#8212;auto-scaling-group &#8220;map-update-scale-group&#8221; <br />
   &#8212;min-size 1 &#8212;max-size 1 <br />
   &#8212;recurrence &#8220;0 0 * <em> </em>&#8221;
as-put-scheduled-update-group-action <br />
   &#8212;name &#8220;map-update-stop&#8221; <br />
   &#8212;auto-scaling-group &#8220;map-update-scale-group&#8221; <br />
   &#8212;min-size 0 &#8212;max-size 0 <br />
   &#8212;recurrence &#8220;15 0 * <em> </em>&#8221;
as-describe-scheduled-actions &#8212;headers&nbsp;~~~~</p>
<p>As before, the third line provides a list of the actions that have been&nbsp;scheduled.</p>
<p>[hr]</p>
<p>And thats it! We are now only paying for 10 or 15 minutes of cloud per
day, as opposed to 1,440 of them. To review the timeline we have created
in this example: our auto scaling group boots up an instance up at
midnight <span class="caps">UTC</span> that immediately executes &#8220;update.sh&#8221;. This automatically
executes &#8220;update.py&#8221; and shoots us a diagnostic email. It then waits 10
minutes to make sure everything has time to run, before stopping the
instance. 5 minutes after <emph>that</emph> the auto scaling group then
completely terminates the&nbsp;instance.</p>
<p>Other great&nbsp;resources:</p>
<ul>
<li><a href="http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/schedule_time.html">Official Amazon documentation for scheduling auto scaling&nbsp;groups</a></li>
<li><a href="http://alestic.com/2011/11/ec2-schedule-instance">Running <span class="caps">EC2</span> Instances on a Recurring Schedule with Auto&nbsp;Scaling</a></li>
<li><a href="http://www.robertsindall.co.uk/blog/how-to-use-amazons-auto-scaling-groups/">Summary of <span class="caps">API</span>&nbsp;commands</a></li>
<li><a href="http://www.cardinalpath.com/autoscaling-your-website-with-amazon-web-services-part-2/">Auto Scaling Your Website with Amazon Web&nbsp;Services</a></li>
</ul>
            </div>
            <!-- /.entry-content -->
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'justmytwospence'; // required: replace example with your forum shortname
            var disqus_identifier = 'ec2-apis';
            var disqus_url = 'http://justmytwospence.github.com/pelican/ec2-apis.html';
            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="pabel panel-primary" id="sidebar">
            <div class="panel-body">

<aside>
    <section>
        <ul class="list-group">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="http://github.com/justmytwospence"><i
                            class="fa fa-github-square fa-lg"></i> GitHub
                    </a></li>
                    <li class="list-group-item"><a href="http://linkedin.com/in/spencerboucher"><i
                            class="fa fa-linkedin-square fa-lg"></i> LinkedIn
                    </a></li>
                  </ul>
                </li>



                <li class="list-group-item"><a href="http://justmytwospence.github.com/pelican/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group list-inline tagcloud" id="tags">
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/andrew-ng.html">
                                andrew ng
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/api.html">
                                api
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/approximation.html">
                                approximation
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/auto-scaling.html">
                                auto scaling
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/aws.html">
                                aws
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/biometrics.html">
                                biometrics
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/brain.html">
                                brain
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/cartodb.html">
                                cartoDB
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/cartography.html">
                                cartography
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/cloud.html">
                                cloud
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/cloud-computing.html">
                                cloud computing
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/college.html">
                                college
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/color.html">
                                color
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/coursera.html">
                                Coursera
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/cron.html">
                                cron
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/crowdsourcing.html">
                                crowdsourcing
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/ec2.html">
                                ec2
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/economics.html">
                                economics
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/education.html">
                                education
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/entrepeneurship.html">
                                entrepeneurship
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/foldit.html">
                                foldit
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/freakonomics.html">
                                freakonomics
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/freesurfer.html">
                                Freesurfer
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/gamification.html">
                                gamification
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/hierarchy-of-needs.html">
                                Hierarchy of needs
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/higher-education.html">
                                higher education
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/holo.html">
                                holo
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/humanities.html">
                                humanities
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/ideas-worth-spreading.html">
                                ideas worth spreading
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/javascript.html">
                                javascript
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/kaggle.html">
                                kaggle
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/latex.html">
                                latex
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/machine-learning.html">
                                machine learning
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/map.html">
                                map
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/maps.html">
                                maps
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/maslow.html">
                                Maslow
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/mooc.html">
                                MOOC
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/neuroimaging.html">
                                neuroimaging
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/neuroscience.html">
                                neuroscience
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/optogenetics.html">
                                optogenetics
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/paradigm.html">
                                paradigm
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/passwords.html">
                                passwords
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/philosophy.html">
                                philosophy
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/politics.html">
                                politics
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/power.html">
                                power
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/prediction.html">
                                prediction
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/predictions.html">
                                predictions
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/quantifiedself.html">
                                quantifiedSelf
                            </a>
                        </li>
                        <li class="list-group-item tag-0">
                            <a href="http://justmytwospence.github.com/pelican/tag/r.html">
                                R
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/revealjs.html">
                                reveal.js
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/sas.html">
                                SAS
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/science.html">
                                science
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/shiny.html">
                                Shiny
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/silicon-valley.html">
                                silicon valley
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/solarized.html">
                                solarized
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/sound.html">
                                sound
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/splash.html">
                                splash
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/stanford.html">
                                stanford
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://justmytwospence.github.com/pelican/tag/stepwise.html">
                                stepwise
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/super.html">
                                super
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/superpower.html">
                                superpower
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/technology.html">
                                technology
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/ted.html">
                                TED
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/test.html">
                                Test
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/tex.html">
                                tex
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/typesetting.html">
                                typesetting
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/university.html">
                                university
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/writelatex.html">
                                writelatex
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://justmytwospence.github.com/pelican/tag/zombies.html">
                                zombies
                            </a>
                        </li>
                    </ul>
                </li>    

    <li class="list-group-item"><h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
        <div id="gh_repos">
            <p class="list-group-item">Status updating...</p>
        </div>
    </li>

        </ul>
    </section>

</aside>            </div>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Spencer Boucher
            &middot; Powered by <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>, <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, and <a href="http://pages.github.com/" target="_blank">GitHub Pages</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><a href="#">Top<i class="fa fa-arrow-up"></i></a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://justmytwospence.github.com/pelican/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://justmytwospence.github.com/pelican/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = 'http://justmytwospence.github.com/pelican/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'justmytwospence',
                count: 5,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="http://justmytwospence.github.com/pelican/theme/js/github.js" type="text/javascript"></script>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'justmytwospence'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
</body>
</html>