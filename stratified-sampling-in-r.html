<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
    <!-- Google fonts! -->
    <link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic|Patua+One' rel='stylesheet' type='text/css'>

    <title>Stratified sampling in R - justmytwospence</title>
    
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="http://spencerboucher.com//favicon.ico" rel="icon">

    <!-- Open Graph tags -->
        <meta property="og:site_name" content="justmytwospence" />
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Stratified sampling in R"/>
            <meta property="og:url" content="http://spencerboucher.com/stratified-sampling-in-r.html"/>
            <meta property="og:description" content="I was surprised to find that R doesn’t have a base function for stratified random sampling. There’s not even a well known package I could find that does this in a straight forward way. So heres my own. It is essentially a wrapper for a ddply call that ..."/>
            <meta property="article:published_time" content="2014-01-10" />
            <meta property="article:section" content="R" />

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://spencerboucher.com/theme/css/bootstrap.solarized-light.min.css" type="text/css"/>
    <link href="http://spencerboucher.com/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://spencerboucher.com/theme/css/pygments/github.css" rel="stylesheet">
        <link href="http://spencerboucher.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://spencerboucher.com/theme/css/style.css" type="text/css"/>

        <link href="http://spencerboucher.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="justmytwospence ATOM Feed"/>

<!-- MathJax script -->
<script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
<script type="text/javascript">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'center', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>
    <link rel="stylesheet" href="/theme/css/knitr.css" type="text/css"/>
    <script src="http://spencerboucher.com/theme/js/knitr.js" type="text/javascript"></script> 

    <link rel="stylesheet" href="http://spencerboucher.com/theme/css/ipythonnb.css" type="test/css"/>


</head>

<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://spencerboucher.com/" class="navbar-brand">
justmytwospence            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://spencerboucher.com/pages/about.html">
                             About
                          </a></li>
                         <li><a href="http://spencerboucher.com/pages/map.html">
                             <i class="fa fa-location-arrow fa-lg"></i>
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://github.com/justmytwospence">
                        <i class="fa fa-github-square fa-lg"></i><span class="icon-label">GitHub</span>
                    </a></li>
                    <li><a href="http://linkedin.com/in/spencerboucher">
                        <i class="fa fa-linkedin-square fa-lg"></i><span class="icon-label">LinkedIn</span>
                    </a></li>
                    <li><a href="feeds/all.atom.xml">
                        <i class="fa fa-rss-square fa-lg"></i><span class="icon-label">RSS</span>
                    </a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">
    

        <section id="content">
            <article>
                <header class="page-header">
                    <h1>Stratified sampling in&nbsp;R</h1>
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-01-10T00:00:00"> Fri 10 January 2014</time>
    </span>


    <span>
        <i class="fa fa-folder-open"></i>
        <a href="http://spencerboucher.com/category/r.html">R</a>
    </span>



    
</footer><!-- /.post-info -->                </header>
                <div class="entry-content">
                    <p>I was surprised to find that R doesn’t have a base function for stratified random sampling. There’s not even a well known package I could find that does this in a straight forward way. So heres my&nbsp;own.  </p>
<p>It is essentially a wrapper for a ddply call that samples each subset and then combines them. If the size argument is less than 1, it will be interpreted as the percentage of each stratification subset that should be sampled. If the size argument is greater than 1, it will be interpreted as the number of observations to sample from each stratification&nbsp;subset.  </p>
<p>Note that in the first case, a different number of observations will be taken from each subset depending on their total number of observations. In the second case however, an equal number of observations will be sampled from each subset, regardless of their total number of&nbsp;observations.  </p>
<p>The .by argument is formulated the same way it is for any other ddply&nbsp;call.  </p>
<script src="https://gist.github.com/justmytwospence/7937389.js"></script>
                </div>
                <!-- /.entry-content -->
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'justmytwospence'; // required: replace example with your forum shortname
            var disqus_identifier = 'stratified-sampling-in-r';
            var disqus_url = 'http://spencerboucher.com/stratified-sampling-in-r.html';
            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
            </article>
        </section>
    </div>


<div class="col-sm-3" id="sidebar">


    <section class="panel panel-default text-center">
        <div class="panel-heading">
            <a href="http://spencerboucher.com/categories">
                <h4 class="panel-title">
                    <i class="fa fa-folder-open fa-lg"></i>
                    <span class="icon-label">Categories</span>
                </h4>
            </a>
        </div>
        <div class="list-group" id="categories">
                <a class="Design list-group-item " href="http://spencerboucher.com/category/design.html">
                    <h4>Design</h4>
                </a>
                <a class="Misc list-group-item " href="http://spencerboucher.com/category/misc.html">
                    <h4>Misc</h4>
                </a>
                <a class="Python list-group-item " href="http://spencerboucher.com/category/python.html">
                    <h4>Python</h4>
                </a>
                <a class="R list-group-item active" href="http://spencerboucher.com/category/r.html">
                    <h4>R</h4>
                </a>
                <a class="Vizualization list-group-item " href="http://spencerboucher.com/category/vizualization.html">
                    <h4>Vizualization</h4>
                </a>
        </div>
    </section>

        <section class = "panel panel-default text-center">
            <div class="panel-heading">
                <a href="http://spencerboucher.com/tags">
                    <h4 class="panel-title">
                        <i class="fa fa-tags fa-lg"></i>
                        <span class="icon-label">Tags</span>
                    </h4>
                </a>
            </div>
            <div class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/api.html">
                            api
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/aws.html">
                            aws
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/brain.html">
                            brain
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/cartodb.html">
                            cartoDB
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/cartography.html">
                            cartography
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/coursera.html">
                            Coursera
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/cron.html">
                            cron
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/crowdsourcing.html">
                            crowdsourcing
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/design.html">
                            design
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/ec2.html">
                            ec2
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/economics.html">
                            economics
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-1" href="http://spencerboucher.com/tag/education.html">
                            education
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/freakonomics.html">
                            freakonomics
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/freesurfer.html">
                            Freesurfer
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/ggplot2.html">
                            ggplot2
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/hierarchy-of-needs.html">
                            Hierarchy of needs
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/higher-education.html">
                            higher education
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/ideas-worth-spreading.html">
                            ideas worth spreading
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/machine-learning.html">
                            machine learning
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/mooc.html">
                            MOOC
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-1" href="http://spencerboucher.com/tag/neuroscience.html">
                            neuroscience
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/politics.html">
                            politics
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/prediction.html">
                            prediction
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/predictions.html">
                            predictions
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-1" href="http://spencerboucher.com/tag/r.html">
                            R
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-1" href="http://spencerboucher.com/tag/shiny.html">
                            shiny
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-3" href="http://spencerboucher.com/tag/stepwise.html">
                            stepwise
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/ted.html">
                            TED
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a class="tag-5" href="http://spencerboucher.com/tag/tex.html">
                            tex
                        </a>
                    </li>
            </div>
        </section>  


	<!-- no header
    <li class="list-group-item"><h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4></li>
    -->

    <div id="twitter_timeline">
        <a class="twitter-timeline" data-chrome="noheader" href="https://twitter.com/justmytwospence" data-widget-id="413946059455361024">Tweets by justmytwospence</a>
    </div>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

</div>
    </div>
</div>

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Spencer Boucher
            &middot; Powered by <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>, <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, <a href="http://pages.github.com/" target="_blank">GitHub Pages</a>, and Viewers Like You         </div>
         <div class="col-xs-2"><a href="#" class="pull-right"><i class="fa fa-arrow-circle-up fa-lg"></i></a></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<script src="http://spencerboucher.com/theme/js/dynamic.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://spencerboucher.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://spencerboucher.com/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'justmytwospence'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-45101202-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>

            <script src="http://spencerboucher.com/js/tooltip.js"></script>

</body>

</html>